---
openapi: 3.0.2
info:
  title: payment-terms-integrationV1
  version: 1.0.0
  description: |
    API de integração de condição de pagamento (Payment-Terms) V1

    Compatível com a versão V11 do serviço de negócio Sales
  contact: {}
servers:
  - url: https://{url}/api/{version}/integration
    description: Integration Router Server
    variables:
      url:
        default: app2.mastercrm.ws
        description: URL de acesso ao Integration-Router
      version:
        default: v1
        description: Versão do Integration-Router
paths:
  /record:
    get:
      tags:
        - Payment-Terms
      parameters:
        - name: Integration-Filter
          description: |
            Filtro opcional para realizar a busca de um ou mais registros. Suporta o uso de
            RestQuery.
            
            
            Se o header for omitido, lista todos os registros
            
            Se o header não contiver valores, lista todos os registros
          schema:
            type: string
          in: header
          required: false
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment-TermsIntegration_V1_FullResponse'
          description: Returns a list of Payment-Terms
        401:
          description: Unauthorized
      summary: Listar condições de pagamento
      description: Retorna uma lista de condições de pagamento cadastradas ou determinadas
        condições com base nos filtros no header Integration-Filter
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Payment-TermsIntegration_V1_BodyCreate'
      tags:
        - Payment-Terms
      parameters:
        - name: Integration-Filter
          description: |
            Filtro do registro específico para a ação. Deve-se usar o identificador principal da
            entidade (ID).
          schema:
            type: string
          in: header
          required: false
        - name: Integration-Response
          description: |
            Nível de detalhe do retorno da API. São suportados atualmente:
            
            **full** - Resposta completa, equivalente a um GET no recurso
            
            **minimum** - Resposta mínima, equivalente ao ID, data de criação e atualização do
            registro
            
            Se o header não for informado, por padrão o retorno será equivalente ao nível
            **minimum**
          schema:
            default: minimum
            enum:
              - full
              - minimum
            type: string
          in: header
          required: false
        - name: Integration-Action
          description: |
            Ação a ser realizada na API de integração. Selecione uma das opções para carregar o
            body da requisição.
          schema:
            oneOf:
              - $ref: '#/components/schemas/Payment-TermsIntegration_V1_BodyCreate'
              - $ref: '#/components/schemas/Payment-TermsIntegration_V1_BodyUpdate'
              - $ref: '#/components/schemas/Payment-TermsIntegration_V1_BodyUpsert'
            discriminator:
              mapping:
                create: '#/components/schemas/Payment-TermsIntegration_V1_BodyCreate'
                update: '#/components/schemas/Payment-TermsIntegration_V1_BodyUpdate'
                upsert: '#/components/schemas/Payment-TermsIntegration_V1_BodyUpsert'
          in: header
          required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment-TermsIntegration_V1_FullResponse'
          description: Returns a payment term register
        401:
          description: Unauthorized
      summary: Criar, atualizar e deletar Payment-Terms
      description: |
        A ação a ser realizada no cadastro depende do valor preenchido no header
        **Integration-Action**:


        **create** - Realiza a operação de POST do cadastro enviado;


        **update** - Realiza a operação de PATCH do cadastro enviado, baseado no ID do registro
        preenchido no header **Integration-Filter**;


        **upsert** - Realiza a operação de POST do cadastro enviado se não for enviado ID do registro
        no header **Integration-Filter** **OU** realiza a operação de PUT do cadastro enviado se for
        enviado o ID do registro no header **Integration-Filter**;
    parameters:
      - name: Integration-Service
        description: 'Serviço responsável pela entidade. Exemplo: sales'
        schema:
          default: sales
          type: string
        in: header
        required: true
      - name: Integration-Resource
        description: 'Recurso para requisição. Exemplo: payment-terms-integration'
        schema:
          default: payment-terms-integration
          type: string
        in: header
        required: true
      - name: Integration-Version
        description: 'Versão da API de integração. Exemplo: v1'
        schema:
          default: v1
          type: string
        in: header
        required: true
components:
  schemas:
    Payment-TermsIntegration_V1_BodyEmpty:
      description: No body
      type: object
    Payment-TermsIntegration_V1_MinimumResponse:
      type: object
      properties:
        id:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
      example:
        id: 19de1e5b-37c8-42c6-a62f-3d7bdd11e994
        createAt: 2019-08-13T18:00:38.780Z
        updatedAt: 2019-08-13T18:00:38.780Z
    Payment-TermsIntegration_V1_BodyUpdate:
      type: object
      properties:
        externalId:
          type: string
        active:
          type: boolean
        code:
          type: string
        availableFirstOrder:
          type: boolean
        standard:
          type: boolean
        description:
          type: string
        acronym:
          type: string
        companyPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              companyId:
                type: string
              companyName:
                type: string
        customerPermission:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              customerId:
                type: string
              customerName:
                type: string
        userPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              userId:
                type: string
              userName:
                type: string
        daysBetweenInstalment:
          type: integer
        instalmentNumber:
          type: integer
        middleTerm:
          type: integer
        allowChangeDueDate:
          type: boolean
        maxNumberInstalment:
          type: integer
        deleted:
          type: boolean
      example:
        externalId: "30"
        deleted: false
        active: true
        standard: false
        availableFirstOrder: false
        description: 30 dias
        acronym: "30"
        code: "002"
        companyPermissions:
          - id: 58ccc6fd-4f79-4790-a45d-31d6a0b9d16b
            externalId: P#FILIAL HUB05JUNHO
            companyId: 22eea680-d700-499c-abe7-0da056ede03f
            companyName: FILIAL HUB05JUNHO
        customerPermissions: []
        userPermissions: []
        maxNumberInstalment: 1
        daysBetweenInstalment: 0
        instalmentNumber: 1
        middleTerm: 30
        allowChangeDueDate: false
    Payment-TermsIntegration_V1_BodyUpsert:
      type: object
      properties:
        externalId:
          type: string
        active:
          type: boolean
        code:
          type: string
        availableFirstOrder:
          type: boolean
        standard:
          type: boolean
        description:
          type: string
        acronym:
          type: string
        companyPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              companyId:
                type: string
              companyName:
                type: string
        customerPermission:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              customerId:
                type: string
              customerName:
                type: string
        userPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              userId:
                type: string
              userName:
                type: string
        daysBetweenInstalment:
          type: integer
        instalmentNumber:
          type: integer
        middleTerm:
          type: integer
        allowChangeDueDate:
          type: boolean
        maxNumberInstalment:
          type: integer
        deleted:
          type: boolean
      example:
        externalId: "30"
        deleted: false
        active: true
        standard: false
        availableFirstOrder: false
        description: 30 dias
        acronym: "30"
        code: "002"
        companyPermissions:
          - id: 58ccc6fd-4f79-4790-a45d-31d6a0b9d16b
            externalId: P#FILIAL HUB05JUNHO
            companyId: 22eea680-d700-499c-abe7-0da056ede03f
            companyName: FILIAL HUB05JUNHO
        customerPermissions: []
        userPermissions: []
        maxNumberInstalment: 1
        daysBetweenInstalment: 0
        instalmentNumber: 1
        middleTerm: 30
        allowChangeDueDate: false
    Payment-TermsIntegration_V1_FullResponse:
      type: object
      properties:
        id:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        externalId:
          type: string
        active:
          type: boolean
        code:
          type: string
        availableFirstOrder:
          type: boolean
        standard:
          type: boolean
        description:
          type: string
        acronym:
          type: string
        companyPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              companyId:
                type: string
              companyName:
                type: string
        customerPermission:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              customerId:
                type: string
              customerName:
                type: string
        userPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              userId:
                type: string
              userName:
                type: string
        daysBetweenInstalment:
          type: integer
        instalmentNumber:
          type: integer
        middleTerm:
          type: integer
        allowChangeDueDate:
          type: boolean
        maxNumberInstalment:
          type: integer
        deleted:
          type: boolean
      example:
        id: 60ccc6fd-4f79-4790-a45d-31d6a0b9d16b
        createdAt: 2020-05-12T19:26:15.217Z
        updatedAt: 2020-05-13T16:55:09.516Z
        externalId: "30"
        deleted: false
        active: true
        standard: false
        availableFirstOrder: false
        description: 30 dias
        acronym: "30"
        code: "002"
        companyPermissions:
          - id: 58ccc6fd-4f79-4790-a45d-31d6a0b9d16b
            externalId: P#FILIAL HUB05JUNHO
            companyId: 22eea680-d700-499c-abe7-0da056ede03f
            companyName: FILIAL HUB05JUNHO
        customerPermissions: []
        userPermissions: []
        maxNumberInstalment: 1
        daysBetweenInstalment: 0
        instalmentNumber: 1
        middleTerm: 30
        allowChangeDueDate: false
    Payment-TermsIntegration_V1_GetResponse:
      type: object
      properties:
        id:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        externalId:
          type: string
        active:
          type: boolean
        code:
          type: string
        availableFirstOrder:
          type: boolean
        standard:
          type: boolean
        description:
          type: string
        acronym:
          type: string
        companyPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              companyId:
                type: string
              companyName:
                type: string
        customerPermission:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              customerId:
                type: string
              customerName:
                type: string
        userPermissions:
          type: array
          items:
            properties:
              id:
                type: string
              externalId:
                type: string
              userId:
                type: string
              userName:
                type: string
        daysBetweenInstalment:
          type: integer
        instalmentNumber:
          type: integer
        middleTerm:
          type: integer
        allowChangeDueDate:
          type: boolean
        maxNumberInstalment:
          type: integer
        deleted:
          type: boolean
      example:
        id: 60ccc6fd-4f79-4790-a45d-31d6a0b9d16b
        createdAt: 2020-05-12T19:26:15.217Z
        updatedAt: 2020-05-13T16:55:09.516Z
        externalId: "30"
        deleted: false
        active: true
        standard: false
        availableFirstOrder: false
        description: 30 dias
        acronym: "30"
        code: "002"
        companyPermissions:
          - id: 58ccc6fd-4f79-4790-a45d-31d6a0b9d16b
            externalId: P#FILIAL HUB05JUNHO
            companyId: 22eea680-d700-499c-abe7-0da056ede03f
            companyName: FILIAL HUB05JUNHO
        customerPermissions: []
        userPermissions: []
        maxNumberInstalment: 1
        daysBetweenInstalment: 0
        instalmentNumber: 1
        middleTerm: 30
        allowChangeDueDate: false
    Payment-TermsIntegration_V1_BodyCreate:
      required:
        - externalId
        - description
        - active
        - standard
        - availableFirstOrder
      type: object
      properties:
        externalId:
          description: Código único do sistema externo que identifica este registro
          type: string
        active:
          description: Indica se a condição de pagamento está ativa ou não
          type: boolean
        code:
          description: Código da condição de pagamento
          type: string
        availableFirstOrder:
          description: Indica se a condição de pagamento estará disponível na primeira
            ordem
          type: boolean
        standard:
          description: Indica se o registro de condição de pagamento é padrão do sistema
          type: boolean
        description:
          description: Descrição da condição de pagamento
          type: string
        acronym:
          description: Sigla da condição de pagamento
          type: string
        companyPermissions:
          description: Permissões para a empresa/filial. Não informar valores neste
            atributo fará com que todos os registros estejam disponíveis para todas
            as empresas/filiais
          type: array
          items:
            properties:
              externalId:
                description: Código único do registro de empresa/filial no sistema
                  externo
                type: string
              companyId:
                description: Identificador do registro da empresa/filial
                type: string
              companyName:
                description: Nome da empresa/filial
                type: string
        customerPermission:
          description: Permissões de uso da condição de pagamento para o cliente.
            Não informar valores neste atributo fará com que todos os registros estejam
            disponíveis para todos os clientes
          type: array
          items:
            properties:
              externalId:
                description: Código único do registro de cliente no sistema externo
                type: string
              customerId:
                description: Identificador do registro da ciente no CRM
                type: string
              customerName:
                description: Nome do cliente
                type: string
        userPermissions:
          description: Permissão específica para usuários do sistema. Não informar
            valores neste atributo fará com que todos os registros estejam disponíveis
            para todos os usuários
          type: array
          items:
            properties:
              externalId:
                description: Código único do registro do usuário no sistema externo
                type: string
              userId:
                description: Identificador do usuário no CRM
                type: string
              userName:
                description: nome do usuário
                type: string
        daysBetweenInstalment:
          description: Quantidade de dias entre as parcelas
          type: integer
        instalmentNumber:
          description: Número da parcela
          type: integer
        middleTerm:
          description: Tempo médio de condição de pagamento em dias
          type: integer
        allowChangeDueDate:
          description: Indica se será permitido alterar a data de vencimento
          type: boolean
        maxNumberInstalment:
          description: Número máximo de parcelas
          type: integer
        deleted:
          description: Indica se o registro está marcado como removido do sistema
          type: boolean
      example:
        externalId: "30"
        deleted: false
        active: true
        standard: false
        availableFirstOrder: false
        description: 30 dias
        acronym: "30"
        code: "002"
        companyPermissions:
          - externalId: P#FILIAL HUB05JUNHO
            companyId: 22eea680-d700-499c-abe7-0da056ede03f
            companyName: FILIAL HUB05JUNHO
        customerPermissions: []
        userPermissions: []
        maxNumberInstalment: 1
        daysBetweenInstalment: 0
        instalmentNumber: 1
        middleTerm: 30
        allowChangeDueDate: false
tags:
  - name: APP2
    description: Ambiente APP2
  - name: integration
    description: ""
