---
openapi: 3.0.2
info:
  title: price-lists-items-integrationV1
  version: 1.0.0
  description: |
    API de integração de itens de tabela de preço (Price-list-items) V1

    Compatível com a versão de negócio Product V7
  contact: {}
servers:
  - url: https://{url}/api/{version}/integration
    description: Integration Router Server
    variables:
      url:
        default: app2.mastercrm.ws
        description: URL de acesso ao Integration-Router
      version:
        default: v1
        description: Versão do Integration-Router
paths:
  /record:
    get:
      tags:
        - Price-List-Items
      parameters:
        - name: Integration-Filter
          description: |
            Filtro opcional para realizar a busca de um ou mais registros. Suporta o uso de
            RestQuery.
            
            
            Se o header for omitido, lista todos os registros
            
            Se o header não contiver valores, lista todos os registros
          schema:
            type: string
          in: header
          required: false
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Price-List-Items-Integration_V1_FullResponse'
          description: Returns a list of price list items
        401:
          description: Unauthorized
      summary: Listar itens de tabela de preço
      description: Retorna uma lista de itens de preço cadastrados ou determinados
        itens com base nos filtros no header Integration-Filter
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Price-List-Items-Integration_V1_BodyCreate'
      tags:
        - Price-List-Items
      parameters:
        - name: Integration-Filter
          description: |
            Filtro do registro específico para a ação. Deve-se usar o identificador principal da
            entidade (ID).
          schema:
            type: string
          in: header
          required: false
        - name: Integration-Response
          description: |
            Nível de detalhe do retorno da API. São suportados atualmente:
            
            **full** - Resposta completa, equivalente a um GET no recurso
            
            **minimum** - Resposta mínima, equivalente ao ID, data de criação e atualização do
            registro
            
            Se o header não for informado, por padrão o retorno será equivalente ao nível
            **minimum**
          schema:
            enum:
              - full
              - minimum
            type: string
          in: header
          required: false
        - name: Integration-Action
          description: |
            Ação a ser realizada na API de integração. Selecione uma das opções para carregar o
            body da requisição.
          schema:
            anyOf:
              - $ref: '#/components/schemas/Price-List-Items-Integration_V1_BodyCreate'
              - $ref: '#/components/schemas/Price-List-Items-Integration_V1_BodyUpdate'
              - $ref: '#/components/schemas/Price-List-Items-Integration_V1_BodyUpsert'
              - $ref: '#/components/schemas/Price-List-Items-Integration_V1_BodyEmpty'
            discriminator:
              mapping:
                create: '#/components/schemas/Price-List-Items-Integration_V1_BodyCreate'
                update: '#/components/schemas/Price-List-Items-Integration_V1_BodyUpdate'
                upsert: '#/components/schemas/Price-List-Items-Integration_V1_BodyUpsert'
                delete: '#/components/schemas/Price-List-Items-Integration_V1_BodyEmpty'
          in: header
          required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Price-List-Items-Integration_V1_FullResponse'
          description: Returns a price list register
        401:
          description: Unauthorized
      summary: Criar, atualizar e deletar itens de tabelas de preço
      description: |
        A ação a ser realizada no cadastro depende do valor preenchido no header
        **Integration-Action**:


        **create** - Realiza a operação de POST do cadastro enviado;


        **update** - Realiza a operação de PATCH do cadastro enviado, baseado no ID do registro
        preenchido no header **Integration-Filter**;


        **upsert** - Realiza a operação de POST do cadastro enviado se não for enviado ID do registro
        no header **Integration-Filter** **OU** realiza a operação de PUT do cadastro enviado se for
        enviado o ID do registro no header **Integration-Filter**;

        **delete** - Realiza a operação de DELETE do registro especificado no header **Integration-Filter**
    parameters:
      - name: Integration-Service
        description: 'Serviço responsável pela entidade. Exemplo: product'
        schema:
          default: product
          type: string
        in: header
        required: true
      - name: Integration-Resource
        description: 'Recurso para requisição. Exemplo: price-list-items-integration'
        schema:
          default: price-list-items-integration
          type: string
        in: header
        required: true
      - name: Integration-Version
        description: 'Versão da API de integração. Exemplo: v1'
        schema:
          default: v1
          type: string
        in: header
        required: true
components:
  schemas:
    Price-List-Items-Integration_V1_BodyEmpty:
      description: No body
      type: object
    Price-List-Items-Integration_V1_MinimumResponse:
      type: object
      properties:
        id:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
      example:
        id: 19de1e5b-37c8-42c6-a62f-3d7bdd11e994
        createAt: 2019-08-13T18:00:38.780Z
        updatedAt: 2019-08-13T18:00:38.780Z
    Price-List-Items-Integration_V1_BodyCreate:
      required:
        - active
        - description
        - salesPrice
        - priceList
        - product
        - externalId
      type: object
      properties:
        costPrice:
          description: Preço de custo
          type: number
        fixedPrice:
          description: Preço fixo
          type: number
        externalId:
          description: Código externo único para o registro
          type: string
        product:
          description: Produto da lista de preço
          type: string
          properties:
            id:
              description: Identificador do produto
              type: string
        priceList:
          description: Lista de preço
          type: string
          properties:
            id:
              description: Identificador da lista de preço
              type: string
        pricesRange:
          description: Preço por faixa de produto vendida
          type: array
          items:
            properties:
              externalId:
                description: Código externo único do registro
                type: string
              quantityPrice:
                description: Preço para a faixa
                type: string
              minimumQuantity:
                description: Quantidade mínima do produto
                type: string
              maximumQuantity:
                description: Quantidade máxima do produto
                type: string
        salesPrice:
          description: Preço de venda
          type: number
        minimumPrice:
          description: Preço mínimo para a venda
          type: number
        maximumPrice:
          description: Preço máximo para a venda
          type: number
      example:
        externalId: T3||MARCOS02||PRODUTO01
        product:
          id: eab930ff-675c-4dee-823b-46d3a8ac145b
        priceList:
          id: c496a838-4fd7-464b-bf9d-253cfcd4b3f7
        salesPrice: 202.202
        minimumPrice: 200
        maximumPrice: 220
        costPrice: 150
        fixedPrice: 200
        pricesRange:
          - id: bdeb3712-eabc-4799-b557-84fc98d18222
            externalId: RANGE10-20
            minimumQuantity: 10
            maximumQuantity: 20
            quantityPrice: 202
    Price-List-Items-Integration_V1_FullResponse:
      type: object
      properties:
        id:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        costPrice:
          type: number
        fixedPrice:
          type: number
        externalId:
          type: string
        product:
          type: string
          properties:
            id:
              type: string
        priceList:
          type: string
          properties:
            id:
              type: string
        pricesRange:
          type: array
          items:
            properties:
              externalId:
                type: string
              quantityPrice:
                type: string
              minimumQuantity:
                type: string
              maximumQuantity:
                type: string
        salesPrice:
          type: number
        minimumPrice:
          type: number
        maximumPrice:
          type: number
      example:
        id: 3a542bd0-a066-476f-81b9-b017b289b6ac
        createdAt: 2020-04-30T19:49:52.731Z
        updatedAt: 2020-06-29T17:08:45.448Z
        externalId: T3||MARCOS02
        product:
          id: eab930ff-675c-4dee-823b-46d3a8ac145b
        priceList:
          id: c496a838-4fd7-464b-bf9d-253cfcd4b3f7
        salesPrice: 202.202
        minimumPrice: 200
        maximumPrice: 220
        costPrice: 150
        fixedPrice: 200
        pricesRange:
          - id: 58dh65ff-675c-4dee-823b-46d3a8ac145b
            externalId: RANGE10-20
            minimumQuantity: 10
            maximumQuantity: 20
            quantityPrice: 202
    Price-List-Items-Integration_V1_GetResponse:
      type: object
      properties:
        id:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        costPrice:
          type: number
        fixedPrice:
          type: number
        externalId:
          type: string
        product:
          type: string
          properties:
            id:
              type: string
        priceList:
          type: string
          properties:
            id:
              type: string
        pricesRange:
          type: array
          items:
            properties:
              externalId:
                type: string
              quantityPrice:
                type: string
              minimumQuantity:
                type: string
              maximumQuantity:
                type: string
        salesPrice:
          type: number
        minimumPrice:
          type: number
        maximumPrice:
          type: number
      example:
        id: 3a542bd0-a066-476f-81b9-b017b289b6ac
        createdAt: 2020-04-30T19:49:52.731Z
        updatedAt: 2020-06-29T17:08:45.448Z
        externalId: T3||MARCOS02
        product:
          id: eab930ff-675c-4dee-823b-46d3a8ac145b
        priceList:
          id: c496a838-4fd7-464b-bf9d-253cfcd4b3f7
        salesPrice: 202.202
        minimumPrice: 200
        maximumPrice: 220
        costPrice: 150
        fixedPrice: 200
        pricesRange:
          - id: 58dh65ff-675c-4dee-823b-46d3a8ac145b
            externalId: RANGE10-20
            minimumQuantity: 10
            maximumQuantity: 20
            quantityPrice: 202
    Price-List-Items-Integration_V1_BodyUpdate:
      type: object
      properties:
        costPrice:
          type: number
        fixedPrice:
          type: number
        externalId:
          type: string
        product:
          type: object
          properties:
            id:
              type: string
        priceList:
          type: string
          properties:
            id:
              type: string
        pricesRange:
          type: array
          items:
            properties:
              externalId:
                type: string
              quantityPrice:
                type: string
              minimumQuantity:
                type: string
              maximumQuantity:
                type: string
        salesPrice:
          type: number
        minimumPrice:
          type: number
        maximumPrice:
          type: number
      example:
        externalId: T3||MARCOS02
        product:
          id: eab930ff-675c-4dee-823b-46d3a8ac145b
        priceList:
          id: c496a838-4fd7-464b-bf9d-253cfcd4b3f7
        salesPrice: 202.202
        minimumPrice: 200
        maximumPrice: 220
        costPrice: 150
        fixedPrice: 200
        pricesRange:
          - id: 58dh65ff-675c-4dee-823b-46d3a8ac145b
            externalId: RANGE10-20
            minimumQuantity: 10
            maximumQuantity: 20
            quantityPrice: 202
    Price-List-Items-Integration_V1_BodyUpsert:
      type: object
      properties:
        costPrice:
          type: number
        fixedPrice:
          type: number
        externalId:
          type: string
        product:
          type: object
          properties:
            id:
              type: string
        priceList:
          type: string
          properties:
            id:
              type: string
        pricesRange:
          type: array
          items:
            properties:
              externalId:
                type: string
              quantityPrice:
                type: string
              minimumQuantity:
                type: string
              maximumQuantity:
                type: string
        salesPrice:
          type: number
        minimumPrice:
          type: number
        maximumPrice:
          type: number
      example:
        externalId: T3||MARCOS02
        product:
          id: eab930ff-675c-4dee-823b-46d3a8ac145b
        priceList:
          id: c496a838-4fd7-464b-bf9d-253cfcd4b3f7
        salesPrice: 202.202
        minimumPrice: 200
        maximumPrice: 220
        costPrice: 150
        fixedPrice: 200
        pricesRange:
          - externalId: RANGE10-20
            minimumQuantity: 10
            maximumQuantity: 20
            quantityPrice: 202
tags:
  - name: APP2
    description: Ambiente APP2
  - name: integration
    description: ""
